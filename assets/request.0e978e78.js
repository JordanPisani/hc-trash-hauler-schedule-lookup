import{e as w,u as f}from"./index.2f57b5df.js";var y=Object.defineProperty,g=Object.defineProperties,P=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,b=(t,r,e)=>r in t?y(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,_=(t,r)=>{for(var e in r||(r={}))j.call(r,e)&&b(t,e,r[e]);if(d)for(var e of d(r))m.call(r,e)&&b(t,e,r[e]);return t},v=(t,r)=>g(t,P(r));let p;function x(t,r){let e=r.responseType;e?e!=="array-buffer"&&e!=="blob"&&e!=="json"&&e!=="native"&&e!=="native-request-init"&&e!=="text"&&(e="text"):e="json",r.responseType=e;const u=w(r.signal);return delete r.signal,globalThis.invokeStaticMessage("request",{url:t,options:r},{signal:u}).then(async s=>{let i,n,c,l,a;if(s.data)if(s.data instanceof ArrayBuffer){if(!(e!=="json"&&e!=="text"&&e!=="blob"||(i=new Blob([s.data]),e!=="json"&&e!=="text"||(p||(p=new FileReaderSync),l=p.readAsText(i),e!=="json")))){try{n=JSON.parse(l||null)}catch(o){const O=v(_({},o),{url:t,requestOptions:r});throw new f("request:server",o.message,O)}if(n.error){const o=v(_({},n.error),{url:t,requestOptions:r});throw new f("request:server",n.error.message,o)}}}else e==="native"&&(s.data.signal=u,c=await fetch(s.data.url,s.data));switch(e){case"blob":a=i;break;case"json":a=n;break;case"native":a=c;break;case"text":a=l;break;default:a=s.data}return{data:a,requestOptions:r,ssl:s.ssl,url:t}})}export{x as execute};
